<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Symmetrical 10x10 Pixel Avatar Generator</title>
    <style>
        body {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #f0f0f0;
        }
        #avatar {
            width: 200px;
            height: 200px;
            border: 1px solid #ccc;
            margin-bottom: 20px;
        }
        button {
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div id="avatar"></div>
    <button onclick="generateAvatar()">Generate Avatar</button>

    <script>
        const gridSize = 10;
        const cellSize = 20; // 200px / 10 cells
        const svgNS = "http://www.w3.org/2000/svg";

        function getRandomColorPair() {
            const baseColor = Math.floor(Math.random() * 360);
            return [
                `hsl(${baseColor}, 70%, 50%)`,
                `hsl(${(baseColor + 30) % 360}, 70%, 50%)`
            ];
        }

        function generateAvatar() {
            const avatarDiv = document.getElementById('avatar');
            avatarDiv.innerHTML = '';

            const colors = getRandomColorPair();
            console.log('Colors:', colors);

            const svg = document.createElementNS(svgNS, "svg");
            svg.setAttribute("width", gridSize * cellSize);
            svg.setAttribute("height", gridSize * cellSize);
            svg.setAttribute("viewBox", `0 0 ${gridSize * cellSize} ${gridSize * cellSize}`);

            const halfGridSize = Math.ceil(gridSize / 2);

            for (let y = 0; y < gridSize; y++) {
                for (let x = 0; x < halfGridSize; x++) {
                    const color = colors[Math.floor(Math.random() * colors.length)];
                    drawCell(svg, x, y, color);
                    drawCell(svg, gridSize - 1 - x, y, color); // Mirror horizontally
                }
            }

            avatarDiv.appendChild(svg);

            // Convert SVG to Base64 and log the result
            const base64Image = svgToBase64(svg);
            console.log(base64Image);
        }

        function drawCell(svg, x, y, color) {
            const rect = document.createElementNS(svgNS, "rect");
            rect.setAttribute("x", x * cellSize);
            rect.setAttribute("y", y * cellSize);
            rect.setAttribute("width", cellSize);
            rect.setAttribute("height", cellSize);
            rect.setAttribute("fill", color);
            svg.appendChild(rect);
        }

        function svgToBase64(svg) {
            const svgString = new XMLSerializer().serializeToString(svg);
            const base64 = window.btoa(unescape(encodeURIComponent(svgString)));
            return `data:image/svg+xml;base64,${base64}`;
        }
    </script>
</body>
</html>